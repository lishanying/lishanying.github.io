<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>HDU4888 Redraw Beautiful Drawings  | Sailing | Sailing&#39;s Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="网络流">
    <meta name="description" content="Problem Description Alice and Bob are playing together. Alice is crazy about art and she has visited many museums around the world. She has a good memory and sh">
<meta name="keywords" content="网络流">
<meta property="og:type" content="article">
<meta property="og:title" content="HDU4888 Redraw Beautiful Drawings ">
<meta property="og:url" content="http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/index.html">
<meta property="og:site_name" content="Sailing">
<meta property="og:description" content="Problem Description Alice and Bob are playing together. Alice is crazy about art and she has visited many museums around the world. She has a good memory and she can remember all drawings she has seen">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-11-22T17:13:31.699Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HDU4888 Redraw Beautiful Drawings ">
<meta name="twitter:description" content="Problem Description Alice and Bob are playing together. Alice is crazy about art and she has visited many museums around the world. She has a good memory and she can remember all drawings she has seen">
    
        <link rel="alternate" type="application/atom+xml" title="Sailing" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Sailing</h5>
          <a href="mailto:18810691321@163.com" title="18810691321@163.com" class="mail">18810691321@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://lishangying.github.io" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">HDU4888 Redraw Beautiful Drawings </div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">HDU4888 Redraw Beautiful Drawings </h1>
        <h5 class="subtitle">
            
                <time datetime="2014-07-29T13:43:58.000Z" itemprop="datePublished" class="page-time">
  2014-07-29
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ACM/">ACM</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
<article id="post-hdu4888-redraw-beautiful-drawings"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">HDU4888 Redraw Beautiful Drawings </h1>
        <div class="post-meta">
            <time class="post-time" title="2014-07-29 21:43:58" datetime="2014-07-29T13:43:58.000Z"  itemprop="datePublished">2014-07-29</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/ACM/">ACM</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p><div class="panel_title" align="left">Problem Description</div></p>
<p><div class="panel_content">Alice and Bob are playing together. Alice is crazy about art and she has visited many museums around the world. She has a good memory and she can remember all drawings she has seen.Today Alice designs a game using these drawings in her memory. First, she matches K+1 colors appears in the picture to K+1 different integers(from 0 to K). After that, she slices the drawing into grids and there are N rows and M columns. Each grid has an integer on it(from 0 to K) representing the color on the corresponding position in the original drawing. Alice wants to share the wonderful drawings with Bob and she tells Bob the size of the drawing, the number of different colors, and the sum of integers on each row and each column. Bob has to redraw the drawing with Alice’s information. Unfortunately, somtimes, the information Alice offers is wrong because of Alice’s poor math. And sometimes, Bob can work out multiple different drawings using the information Alice provides. Bob gets confused and he needs your help. You have to tell Bob if Alice’s information is right and if her information is right you should also tell Bob whether he can get a unique drawing.</div></p>
<p><div class="panel_bottom"></div><br><a id="more"></a><br>&nbsp;</p>
<p><div class="panel_title" align="left">Input</div></p>
<p><div class="panel_content">The input contains mutiple testcases.For each testcase, the first line contains three integers N(1 ≤ N ≤ 400) , M(1 ≤ M ≤ 400) and K(1 ≤ K ≤ 40).<br>N integers are given in the second line representing the sum of N rows.<br>M integers are given in the third line representing the sum of M columns.The input is terminated by EOF.</div></p>
<p><div class="panel_bottom"></div><br>&nbsp;</p>
<p><div class="panel_title" align="left">Output</div></p>
<p><div class="panel_content">For each testcase, if there is no solution for Bob, output “Impossible” in one line(without the quotation mark); if there is only one solution for Bob, output “Unique” in one line(without the quotation mark) and output an N * M matrix in the following N lines representing Bob’s unique solution; if there are many ways for Bob to redraw the drawing, output “Not Unique” in one line(without the quotation mark).</div></p>
<p><div class="panel_bottom"></div><br>&nbsp;</p>
<p><div class="panel_title" align="left">Sample Input</div></p>
<p><div class="panel_content"></div></p>
<p><div style="font-family: Courier New,Courier,monospace;">2 2 4 4 2 4 2 4 2 2 2 2 5 0 5 4 1 4 3 9 1 2 3 3</div><br></p>
<p><div class="panel_bottom"></div><br>&nbsp;</p>
<p><div class="panel_title" align="left">Sample Output</div></p>
<p><div class="panel_content"></div></p>
<p><div style="font-family: Courier New,Courier,monospace;">Not Unique Impossible Unique 1 2 3 3</div><br><br>&nbsp;</p>
<hr>
<p>第一步，考虑如何求是否有解。使用网络流求解，每一行和每一列分别对应一个点，加上源点和汇点一共有N+M+2个点。有三类边：</p>
<ol>
<li>源点 -&gt; 每一行对应的点，流量限制为该行的和</li>
<li>每一行对应的点 -&gt; 每一列对应的点，流量限制为 K</li>
<li>每一列对应的点 -&gt; 汇点，流量限制为该列的和<br>&nbsp;</li>
</ol>
<p>对上图做最大流，若源点出发的边和到达汇点的边全都满流，则有解，否则无解。若要求构造方案，则 (i,j) 对应的整数就是行 i–&gt; 列 j 的流量。</p>
<p>第二步，考虑解是否唯一。显然，解唯一的充分必要条件是完成最大流后的残余网络没有长度大于 2 的环。所以，判断解的唯一性可使用dfs，注意遍历的时候不可以在走完一条边后马上走其反向边，加此限制检查是否有环即可判断解是否唯一。</p>
<p>至此，全题已解决。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> &amp;lt;iostream&amp;gt; </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> &amp;lt;cstring&amp;gt; </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> &amp;lt;cstdio&amp;gt; </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> &amp;lt;queue&amp;gt; </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> &amp;lt;cstdlib&amp;gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">500</span>,maxm=maxn*maxn;</span><br><span class="line"><span class="keyword">int</span> next[maxm*<span class="number">2</span>],num[maxm*<span class="number">2</span>],r[maxm*<span class="number">2</span>],a[maxn*<span class="number">2</span>],row_sum[maxn],col_sum[maxn],n,m,K,tt,T,d[maxn*<span class="number">2</span>],st[maxn*<span class="number">2</span>],cod[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> h[maxn*<span class="number">2</span>],vh[maxn*<span class="number">2</span>];</span><br><span class="line"><span class="keyword">bool</span> don[maxm*<span class="number">2</span>],in[maxn*<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> rr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	next[++tt]=a[x];num[tt]=y;r[tt]=rr;a[x]=tt;</span><br><span class="line">	next[++tt]=a[y];num[tt]=x;r[tt]=<span class="number">0</span>;a[y]=tt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	tt=<span class="number">1</span>;T=n+m+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&amp;lt;=T;i++) a[i]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=n;i++) insert(<span class="number">0</span>,i,row_sum[i]);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=m;i++) insert(i+n,T,col_sum[i]);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">1</span>;j&amp;lt;=m;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			insert(i,j+n,K);</span><br><span class="line">			cod[i][j]=tt;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (x==T) <span class="keyword">return</span> y;</span><br><span class="line">	<span class="keyword">int</span> sig=st[x],minh=T+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (r[st[x]])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (h[num[st[x]]]+<span class="number">1</span>==h[x])</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">int</span> k=dfs(num[st[x]],min(y,r[st[x]]));</span><br><span class="line">				<span class="keyword">if</span> (k)</span><br><span class="line">				&#123;</span><br><span class="line">					r[st[x]]-=k;</span><br><span class="line">					r[st[x]^<span class="number">1</span>]+=k;</span><br><span class="line">					<span class="keyword">return</span> k;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			minh=min(minh,h[num[st[x]]]+<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">if</span> (h[<span class="number">0</span>]&amp;gt;T) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		st[x]=next[st[x]];</span><br><span class="line">		<span class="keyword">if</span> (st[x]==<span class="number">0</span>) st[x]=a[x];</span><br><span class="line">	&#125;<span class="keyword">while</span> (sig!=st[x]);</span><br><span class="line">	<span class="keyword">if</span> (vh[h[x]]--==<span class="number">0</span>) h[<span class="number">0</span>]=T+<span class="number">1</span>;</span><br><span class="line">	vh[h[x]=minh]++;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max_flow</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&amp;lt;=T;i++) h[i]=vh[i]=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&amp;lt;=T;i++) st[i]=a[i];</span><br><span class="line">	vh[<span class="number">0</span>]=T+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> ret=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (h[<span class="number">0</span>]&amp;lt;=T) ret+=dfs(<span class="number">0</span>,K+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*bool find_circle()</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">	deque  q;</span></span><br><span class="line"><span class="comment">	for (int i=0;i&amp;lt;=T;i++) d[i]=0;</span></span><br><span class="line"><span class="comment">	for (int i=0;i&amp;lt;=T;i++)</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		for (int p=a[i];p;p=next[p])</span></span><br><span class="line"><span class="comment">		&#123;</span></span><br><span class="line"><span class="comment">			if (r[p]) d[i]++;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">		if (d[i]==0) q.push_back(i);</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	int cnt=T+1;</span></span><br><span class="line"><span class="comment">	while (!q.empty())</span></span><br><span class="line"><span class="comment">	&#123;</span></span><br><span class="line"><span class="comment">		int x=q.front();</span></span><br><span class="line"><span class="comment">		cnt--;</span></span><br><span class="line"><span class="comment">		q.pop_front();</span></span><br><span class="line"><span class="comment">		for (int p=a[x];p;p=next[p])</span></span><br><span class="line"><span class="comment">		&#123;</span></span><br><span class="line"><span class="comment">			if (r[p^1]) </span></span><br><span class="line"><span class="comment">			&#123;</span></span><br><span class="line"><span class="comment">				d[num[p]]--;</span></span><br><span class="line"><span class="comment">				if (d[num[p]]==0) q.push_back(num[p]);</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">		&#125;</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">	return cnt;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">visit</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> ed)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (don[ed]) </span><br><span class="line">		<span class="keyword">return</span> in[x];</span><br><span class="line">	don[ed]=<span class="literal">true</span>;</span><br><span class="line">	in[x]=<span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> p=a[x];p;p=next[p])</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (r[p] &amp;amp;&amp;amp; (ed^p)!=<span class="number">1</span>)</span><br><span class="line">			<span class="keyword">if</span> (visit(num[p],p)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	in[x]=<span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">find_circle</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&amp;lt;=T;i++) in[i]=<span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=tt;i++) don[i]=<span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">int</span> col=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">2</span>;i&amp;lt;=tt;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (r[i] &amp;amp;&amp;amp; !don[i])</span><br><span class="line">		&#123;</span><br><span class="line">			in[num[i^<span class="number">1</span>]]=<span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">if</span> (visit(num[i],i)) <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">			in[num[i^<span class="number">1</span>]]=<span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_scheme</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Unique\n"</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d"</span>,r[cod[i][<span class="number">1</span>]]);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">2</span>;j&amp;lt;=m;j++) <span class="built_in">printf</span>(<span class="string">" %d"</span>,r[cod[i][j]]);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;amp;n,&amp;amp;m,&amp;amp;K)!=EOF)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> tmp=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=n;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;amp;row_sum[i]);</span><br><span class="line">			tmp+=row_sum[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> sum=tmp;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&amp;lt;=m;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;amp;col_sum[i]);</span><br><span class="line">			tmp-=col_sum[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (tmp) </span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Impossible\n"</span>);</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		construct();</span><br><span class="line">		<span class="keyword">if</span> (max_flow()&amp;lt;sum)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Impossible\n"</span>);</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (find_circle())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Not Unique\n"</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span> print_scheme();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2017-11-22T17:13:31.699Z" itemprop="dateUpdated">2017-11-23 01:13:31</time>
</span><br>


        
    </div>
    <footer>
        <a href="http://lishangying.github.io">
            <img src="/img/avatar.jpg" alt="Sailing">
            Sailing
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络流/">网络流</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/&title=《HDU4888 Redraw Beautiful Drawings 》 — Sailing&pic=http://lishangying.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/&title=《HDU4888 Redraw Beautiful Drawings 》 — Sailing&source=Problem Description
Alice and Bob are playing together. Alice is crazy about ..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《HDU4888 Redraw Beautiful Drawings 》 — Sailing&url=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/&via=http://lishangying.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2014/07/30/hdu4612-warm-up/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">HDU4612 Warm up</h4>
      </a>
    </div>
  

  
</nav>



    














</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Sailing &copy; 2015 - 2017</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/&title=《HDU4888 Redraw Beautiful Drawings 》 — Sailing&pic=http://lishangying.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/&title=《HDU4888 Redraw Beautiful Drawings 》 — Sailing&source=Problem Description
Alice and Bob are playing together. Alice is crazy about ..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《HDU4888 Redraw Beautiful Drawings 》 — Sailing&url=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/&via=http://lishangying.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://lishangying.github.io/2014/07/29/hdu4888-redraw-beautiful-drawings/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACt0lEQVR42u3a0U4jMQwF0P7/T7OvK6G299pJAenMU1WYGZ8gJcb24xFfX/9dz77Jv//+nO+fk58eu/Dw8PAWob8OosXkC5S/K48ZDw8P7zbv2Y6abMqvg0sWbrY0ryPBw8PD+z28PCGe5bd5Qo+Hh4f3V3ibRDn5PCtb4OHh4X2e1z46LyLkdyVPuFhrwcPDw5vkro+83PCzn6/09/Dw8PDWXfXXG27bsspT82TsIIoWDw8P7wJvVn5tAadGE4Zx4uHh4V3g5eWGU4NW7dLMist4eHh4N3ht6LNxqM0QVXLAFJ09PDw8vEO8vOiQnDB5S2zfynrzLjw8PLxrvJzRbs350rSN/yhyPDw8vAu8YUk0bmW1JYlN460G4+Hh4S14+ahoO2zawvLac95Cw8PDw7vH2wwNtBv9Zruvxwvw8PDwLvA2xYIWMwtlNkCAh4eHd4+3T4Lz8kSLz2N7GgkeHh7eNV7b5k827lMJcZvW17UWPDw8vJiXDzbty7XtaMKmeYaHh4d3jzc7ADaN/81IVl5EjsoTeHh4eGteTpq1qfJ7Tw1v4eHh4d3gJa/ZtLs2SfNmyYpVxMPDwxvx8te3KfUsWZ9NPbwp4+Lh4eEd4s3aS68Z+QLlR9GBoSs8PDy8o7xZWJtC7b1xgaKMi4eHh7fg5aNR+X7b/uZsiKFIqfHw8PAu8DYb9KzAkYx25X+Gp/fi4eHhXeM94qtt9rch5oNZdRsMDw8Pb837Kq9kK8+LtsXmHpcw3gxd4eHh4a15sw23LQq0sPwQepy68PDw8Epe29rPQ2yfdurYwMPDw/sMLy86zCaarp9ds/kFPDw8vA/y8uDyrfxKqo2Hh4f3C3izQNvm2axkfOBgwMPDw4t5ecuqXYLkCMmbW/W9eHh4eBd47X/0+fadPKcdBdgPZuHh4eEteP8AFjKccQ3VLsYAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
